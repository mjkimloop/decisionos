meta:
  version: v0.4.6
  date: 2025-11-05
  status: locked
  summary: "Gate-Z: GA Readiness · Sec/Perf/Legal/Pricing · PenTest/Load · SRE/Support · Release (No-Gemini)"

patches:
  techspec:
    - section: "GA Criteria & Exit Checklist"
      mode: replace
      content: |
        GA 통과 필수:
          - PenTest: 하이/크리티컬 취약점 0, 미디엄은 accepted fix plan ≤ 30d
          - Load: P0 경로 3×베타 피크에서 에러율 ≤ 0.2%, p95 ≤ 800ms, p99 ≤ 1500ms
          - SRE: SLO·에러버짓 게이팅 활성(Gate-T), 온콜 로테이션 주 1회, 게임데이 1회 통과
          - Policy/Privacy: Gate-W 준수, DSR(삭제/정정/열람) TAT ≤ 14d, 보존·삭제 정책 문서화
          - Billing: Gate-S 정합(메터링 오차 ≤ ±1%), 인보이스/환불 e2e 100%
          - Legal: ToS/Privacy/DPA/Subprocessors 게시, 쿠키/트래킹 동의 배너 동작
          - Docs: 운영/개발/고객 문서 세트, 릴리즈 노트·마이그레이션 가이드
          - Support: 티켓/슬라 진입, Sev 매트릭스·SLA, Status Page 라이브
          - Rollout: 코호트 롤아웃/플래그/롤백 절차·증빙

    - section: "Security — AppSec · Supply Chain · SBOM"
      mode: replace
      content: |
        AppSec:
          - SAST/DAST 파이프라인(semgrep+ZAP 스텁), 시크릿 스캔, IaC 스캐너
          - 최소권한 검토(CI 정책), 서드파티 라이선스 검증
        공급망:
          - 의존성 핀/재현빌드, 서명 아티팩트, 출처 검증
        SBOM:
          - 포맷: SPDX 2.3, 경로: artifacts/sbom/sbom-<version>.spdx.json
          - 릴리즈마다 생성/보관, 크리티컬 CVE 자동 차단 정책

    - section: "Performance/Capacity — Load/Soak/Scale"
      mode: replace
      content: |
        테스트:
          - Load: 30분 3×피크, Soak: 6h 1.5×피크, Spike: 10×피크 5분
        오토스케일:
          - HPA/큐기반 스케일 정책, 워크로드별 목표 CPU 65%·큐 지연 p95 2s
        배포:
          - 블루/그린 + 카나리(1%→10%→50%→100%), 자동 롤백 트리거=burn_rate > 4.0

    - section: "Privacy/Legal — ToS/Privacy/DPA · DSAR · Cookie"
      mode: replace
      content: |
        문서:
          - /legal/tos, /legal/privacy, /legal/dpa, /legal/subprocessors
        DSAR:
          - 요청 채널: /support/dsar (템플릿), 내부 워크플로: evidence link + SLA
        쿠키/트래킹:
          - 배너: 필수/통계/마케팅 구분, 옵트인 기반, 지역별 규칙(EU/US/KR)
        데이터 삭제:
          - 보존 기간·삭제 지연·백업 삭제 예외 명시, 삭제증빙 레코드 보관

    - section: "Packaging/Pricing — SKUs/Quota/Overage"
      mode: replace
      content: |
        플랜(v1):
          - Basic: 100k decisions/mo, 3 connectors, 1 tenant, SLA 99.0%
          - Pro:   1M decisions/mo, 10 connectors, 3 tenants, SLA 99.5%
          - Ent:   계약형, 전용 한도·커스텀 SLA(≥99.9%), 전용 VPC 옵션
        과금:
          - 초과분 Overage 단가(결정/1k), 스토리지/로그·플러그인 리소스 쿼터
        거버넌스:
          - 가격/플랜은 Gate-S 빌링 정책과 동기, 플래그 기반 플랜 스위치

    - section: "Support/SRE — Sev Matrix · SLA · Status Page"
      mode: replace
      content: |
        심각도:
          - Sev0(전면 중단)·Sev1(중대한 기능)·Sev2(부분)·Sev3(경미)
        SLA(응답/복구):
          - Basic: 1d/Best-effort, Pro: 4h/1d, Ent: 1h/8h(Sev1 기준)
        채널:
          - /support 포털(티켓), 이메일, 상태 페이지(/status)
        운영:
          - 온콜 캘린더, 핸드오프 템플릿, PIR(Post Incident Review) 폼

    - section: "Release Mgmt — Versioning · Notes · CAB"
      mode: replace
      content: |
        버저닝: CalVer+SemVer 혼합(YYYY.MINOR.PATCH)
        변경관리:
          - Change Advisory Brief(CAB) 승인, 위험등급·롤백 플랜 필수
        문서:
          - RELEASE_NOTES.md, BREAKING_CHANGES.md, MIGRATION_GUIDE.md

    - section: "Rollout Plan — Cohorts · Flags · Rollback"
      mode: replace
      content: |
        코호트:
          - 내부→친구/가족→프라이빗 베타→퍼블릭
        플래그:
          - 서버/클라이언트 플래그, 1코호트 단위 증분
        롤백:
          - 기능/데이터 롤백 분리, 데이터 마이그는 DRY-RUN + 스냅샷 선행

    - section: "Docs Set — Operator/Dev/Customer"
      mode: replace
      content: |
        오퍼레이터: 온콜·런북·DR·보안·정책
        개발자: API 레퍼런스·SDK 가이드·예제
        고객: 시작하기·FAQ·가격·SLA·법무 문서

    - section: "SLO & Acceptance"
      mode: replace
      content: |
        Gate-Z 성공 기준:
          - 펜테스트 리포트 제출: High/Critical 0, Medium은 30일 이내 수정계획 승인
          - 부하·침수(soak)·스파이크 테스트 기준 충족(p95/p99/에러율)
          - 에러버짓 게이팅·카나리·자동 롤백 로그 증빙
          - ToS/Privacy/DPA/Subprocessors 공개 + DSAR TAT 리포트
          - 가격/패키징·청구·과금 e2e(오차 ±1%) + 환불 플로우
          - Status Page·지원 포털·SLA/Sev 운영 흐름 e2e
          - SBOM 생성·보관·CVE 게이팅 동작
          - Evidence Binder(GA) 업데이트

  plan:
    - section: "Milestones"
      mode: replace
      content: |
        - AppSec/SBOM/공급망 가드 + 펜테스트 리포트
        - Load/Soak/Spike 테스트·용량/오토스케일 정책
        - Legal/Privacy 문서·DSAR/쿠키·삭제 워크플로
        - Packaging/Pricing·Billing 정합·오버리지 처리
        - Support/SRE·Status Page·Sev/SLA·릴리즈 관리·롤아웃·문서 번들
    - section: "Next Actions"
      mode: replace
      content: |
        Day 131: SAST/DAST·시크릿/IaC 스캔·SBOM 생성·CVE 게이팅 · PenTest 스코프 정의
        Day 132: 부하/침수/스파이크 시나리오·HPA 튜닝·자동 롤백 트리거 검증
        Day 133: ToS/Privacy/DPA/Subprocessors 게시·DSAR/쿠키/삭제 워크플로 구현
        Day 134: SKUs/쿼터/오버리지·청구 정합·Status Page/Support 포털
        Day 135: CAB·릴리즈 노트·코호트 롤아웃·Evidence Binder(GA) 확정

work:
  claude:
    - id: C-66
      title: Legal Pack (ToS/Privacy/DPA/Subprocessors · ko/en)
      deliverables:
        - web/legal/{tos.md, privacy.md, dpa.md, subprocessors.md}
      acceptance:
        - DSR/보존/삭제·국가별 고지 포함, 한국어/영문
    - id: C-67
      title: Packaging/Pricing Docs & Customer Comms
      deliverables:
        - docs/pricing_pack.md, web/pricing/index.md
      acceptance:
        - SKU/쿼터/오버리지·FAQ·환불/분쟁 정책 반영
    - id: C-68
      title: Support/SRE Policies & PIR Template
      deliverables:
        - ops/support_sla.md, ops/severity_matrix.md, ops/pir_template.md
      acceptance:
        - SLA/Sev/응답·복구 시간, PIR 양식 포함
    - id: C-69
      title: Release Notes & Migration Guides
      deliverables:
        - RELEASE_NOTES.md, BREAKING_CHANGES.md, MIGRATION_GUIDE.md
      acceptance:
        - 버전/변경/마이그 가이드 완비
risks:
  - name: 잔존 취약점/공급망 리스크
    mitigation: SBOM+CVE 게이트·서명/출처 검증·취약점 SLA
  - name: 성능 과소추정
    mitigation: 3×피크·Soak·스파이크 병행·오토스케일 튜닝·사전 캐시
  - name: 법무/프라이버시 미비
    mitigation: Legal Pack 공개·DSAR·삭제증빙·감사 라벨
  - name: 요금/오버리지 반발
    mitigation: 투명 가격표·경고/코스트가드·일시 유예
  - name: 롤백 실패
    mitigation: 데이터/기능 롤백 분리·스냅샷·카나리·자동 롤백 훅
