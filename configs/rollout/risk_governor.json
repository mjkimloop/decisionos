{
  "weights": {
    "drift_z": 0.35,
    "anomaly_score": 0.20,
    "infra_p95_ms": 0.15,
    "error_rate": 0.15,
    "quota_denies": 0.10,
    "budget_level": 0.05
  },
  "norm": {
    "drift_z": {
      "type": "zscore",
      "cap": 5.0
    },
    "anomaly_score": {
      "type": "linear",
      "min": 0,
      "max": 1
    },
    "infra_p95_ms": {
      "type": "minmax",
      "min": 300,
      "max": 2000
    },
    "error_rate": {
      "type": "minmax",
      "min": 0.0,
      "max": 0.05
    },
    "quota_denies": {
      "type": "minmax",
      "min": 0,
      "max": 100
    },
    "budget_level": {
      "type": "enum",
      "map": {
        "ok": 0.0,
        "warn": 0.5,
        "exceeded": 1.0
      }
    }
  },
  "mapping": [
    {
      "range": [0.00, 0.30],
      "action": {
        "mode": "promote",
        "step_inc": 10,
        "cap": 100
      }
    },
    {
      "range": [0.30, 0.55],
      "action": {
        "mode": "canary",
        "step_inc": 5,
        "cap": 50
      }
    },
    {
      "range": [0.55, 0.75],
      "action": {
        "mode": "canary",
        "step_inc": 2,
        "cap": 20
      }
    },
    {
      "range": [0.75, 1.00],
      "action": {
        "mode": "freeze",
        "step_inc": 0,
        "cap": 0
      }
    },
    {
      "range": [1.00, 9.99],
      "action": {
        "mode": "abort"
      }
    }
  ]
}
